<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Kitchen - My Pantry</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style1.css">
</head>
<body>
    <header class="site-header">
        <div class="shell">
            <div class="brand">ðŸ¥— Easy <span>Kitchen</span></div>
            <nav class="top-nav">
                <button class="link" id="homeBtn">Home</button>
                <button class="link" id="dietBtn">Dietary</button>
                <button class="link" id="pantryBtn">My Pantry</button>
                <button class="link" id="logoutBtn">Logout</button>
                <button class="link" onclick="window.location.href='contact.html'">Contact</button>
            </nav>
        </div>
    </header>

    <main class="shell">
        <!-- Ingredients Selection Panel -->
        <section id="ingredients" class="panel active">
            <div class="card">
                <h2>My Pantry</h2>
                <p class="subtitle">Select the ingredients you have available</p>

                <div class="toolbar">
                    <input id="searchInput" type="text" placeholder="Search ingredients...">
                    <button class="btn" id="loadIngredientsBtn">Load All Ingredients</button>
                </div>

                <div id="selectedIngredientsSection" class="selected-ingredients" style="display:none;">
                    <h3>Selected Ingredients</h3>
                    <div id="selectedChips" class="chip-row"></div>
                </div>

                <div id="ingredientsList" class="accordion">
                    <p class="muted">Click "Load All Ingredients" to see available ingredients</p>
                </div>

                <div class="actions end">
                    <button class="btn outline" id="savePantryBtn">Save My Pantry</button>
                    <button class="btn primary" id="findRecipesBtn">Find Recipes</button>
                </div>
            </div>
        </section>

        <!-- Recipes Panel -->
        <section id="recipes" class="panel">
            <div class="card">
                <h2>Recipe Suggestions</h2>
                <p class="subtitle">Based on your selected ingredients</p>
                
                <!-- Filter Controls -->
                <div class="filter-controls">
                    <h4>Filter by Cooking Method:</h4>
                    <div class="button-group">
                        <button class="filter-btn active" data-filter="all">All Methods</button>
                        <button class="filter-btn" data-filter="oven">Oven</button>
                        <button class="filter-btn" data-filter="stove">Stovetop</button>
                        <button class="filter-btn" data-filter="both">Both Methods</button>
                    </div>
                </div>
                
                <div id="recipeResults" class="recipe-grid">
                    <p class="loading">Loading recipes...</p>
                </div>
                
                <div class="actions">
                    <button class="btn outline" id="backToIngredientsBtn">Back to My Pantry</button>
                    <button class="btn primary" id="goToGroceryBtn">Generate Grocery List</button>
                </div>
            </div>
        </section>

        <!-- Grocery List Panel -->
        <section id="groceryListSection" class="panel">
            <div class="card">
                <h2>ðŸ›’ Grocery List</h2>
                <p class="subtitle">
                    Missing ingredients based on the recipe(s) you selected.
                </p>

                <div id="groceryList" class="list-container">
                    <p class="muted">
                        No grocery list found yet. Select recipes and click
                        <strong>Generate Grocery List</strong>.
                    </p>
                </div>

                <div class="actions grocery-actions">
                    <button class="btn btn-back" id="backToRecipesBtn">
                        Back to Recipes
                    </button>

                    <button class="btn btn-generate" id="generateListBtn">
                        Generate Grocery List
                    </button>

                    <button class="btn btn-save" id="saveListBtn">
                        Save List
                    </button>

                    <button class="btn btn-export" id="exportListBtn">
                        Export to PDF
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Recipe Detail Modal -->
    <div id="recipeModal" class="recipe-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="recipeDetails">
                <!-- Recipe details will be inserted here -->
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="shell">
            <small>&copy; <span id="year"></span> Easy Kitchen</small>
        </div>
    </footer>

    <!-- Config and app scripts -->
    <script src="config.js"></script>
    <script src="auth.js"></script>
    <script src="api.js"></script>
    <script src="ingredients.js"></script>

    <!-- Load jsPDF before grocerylist.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="grocerylist.js"></script>
</body>
</html>